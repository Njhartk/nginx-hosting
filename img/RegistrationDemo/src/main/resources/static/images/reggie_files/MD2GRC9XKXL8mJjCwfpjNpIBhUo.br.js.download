var __spreadArrays,__extends,__assign,ModernFlyout;(function(n){n.localizedStrings=ServerSideRenderingDataManager.get("LocalizedStrings");n.viewModel=ServerSideRenderingDataManager.get("ViewModel");var i=function(n){var t=r();return t.setDate(t.getDate()-1),t.setHours(0,0,0,0),n<t},t=function(n){return n.toDateString()===r().toDateString()},u=function(n){return n.getFullYear()<=1970},r=function(){return new Date};n.getString=function(t,i,r){t===void 0&&(t=undefined);i===void 0&&(i=undefined);r===void 0&&(r=undefined);var f=t&&i&&t[i+"_key"],u=f&&n.localizedStrings[f];return u||(u=t&&i&&t[i]),u||(u=r&&n.localizedStrings[r]),u||""};n.formatString=function(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return n.replace(/{(\d+)}/g,function(n,t){return typeof i[t]!="undefined"?i[t]:n})};n.getLocation=function(n){var t=document.createElement("a");return t.href=n,{host:t.hostname,path:t.pathname}};n.getStreakCounter=function(n){if(!n)return null;var t={title:n.Title},r=new Date(Date.parse(n.LastUpdatedDate));return i(r)?(t.progress=0,t.image={source:n.BreakImageUrl,alternateText:n.Title}):(t.progress=n.ActivityProgress,t.image={source:n.ImageUrl,alternateText:n.Title}),t};n.getStreakBonusCounters=function(n,r){var o,h,f,e,c,s,l;return!n||!r||r.length===0?null:(o=new Date(Date.parse(n.LastUpdatedDate)),i(o))?(e=r[0],h=u(o)?e.Description:e.Attributes.break_description,[{title:h,image:{source:e.ImageUrl,alternateText:h},progress:0,progressMax:e.ActivityProgressMax},{title:e.Title,image:{source:e.AnimatedIconUrl,alternateText:e.Title}}]):(r.length===1?f=r[0]:r.length===2?(e=r[0],f=e.ActivityProgress===e.ActivityProgressMax&&t(o)?e:r[1]):f=t(o)?r[1]:r[2],c=f.Attributes.complete_description,c&&f.ActivityProgress===0&&t(o)?(s=c,l=f.ActivityProgressMax):(s=f.Description,l=f.ActivityProgress),[{title:s,image:{source:f.ImageUrl,alternateText:s},progress:l,progressMax:f.ActivityProgressMax},{title:f.Title,image:{source:f.AnimatedIconUrl,alternateText:f.Title}}])}})(ModernFlyout||(ModernFlyout={})),function(n){function r(n){return{type:t.GET_USER_INFO,payload:n}}function i(n){return{type:t.CHANGE_VISIBILITY,payload:n}}function u(t){return function(u){n.getUserInfoAjax(n.viewModel.Channel,n.viewModel.PartnerId,n.viewModel.AdditionalParametersStringForAjaxCall,function(f){f&&f.FlyoutResult&&f.FlyoutResult.UserStatus&&f.FlyoutResult.Layout?(n.Logger.Instance.logMessage("Fetched new user info"),n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Success,"UserInfoAjax",!1,{}),u(r(f.FlyoutResult))):n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Error,"UserInfoAjaxError",!1,{message:"Error fetching user info, returned data is null or undefined"});u(i(t))},function(r,f,e){n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Error,"UserInfoAjaxError",!1,{message:"Error occured while fetching user info. Reason: "+r+", statusCode: "+f+", responseText: "+e});u(i(t))})}}var t;(function(n){n.GET_USER_INFO="GET_USER_INFO";n.REPORT_ACTIVITY="REPORT_ACTIVITY";n.CHANGE_VISIBILITY="CHANGE_VISIBILITY"})(t=n.BaseActionTypes||(n.BaseActionTypes={}));n.getUserInfo=r;n.changeVisibility=i;n.fetchUserInfo=u}(ModernFlyout||(ModernFlyout={})),function(n){n.getUserInfoReducer=function(t,i){t===void 0&&(t=n.viewModel.FlyoutResult);switch(i.type){case n.BaseActionTypes.GET_USER_INFO:return i.payload;default:return t}};n.visibilityReducer=function(t,i){t===void 0&&(t=!0);switch(i.type){case n.BaseActionTypes.CHANGE_VISIBILITY:return i.payload;default:return t}}}(ModernFlyout||(ModernFlyout={})),function(n){var t=Redux.combineReducers({flyoutResult:n.getUserInfoReducer,isVisible:n.visibilityReducer}),i=ReduxThunk["default"];n.flyoutStore=Redux.createStore(t,Redux.applyMiddleware(i))}(ModernFlyout||(ModernFlyout={}));__spreadArrays=this&&this.__spreadArrays||function(){for(var i=0,n=0,r=arguments.length;n<r;n++)i+=arguments[n].length;for(var u=Array(i),f=0,n=0;n<r;n++)for(var e=arguments[n],t=0,o=e.length;t<o;t++,f++)u[f]=e[t];return u},function(n){var t,i;(function(n){n.Click="Click";n.Init="Init";n.Load="Load";n.Latency="Latency";n.Show="Show";n.Hide="Hide";n.Success="Success";n.Error="Error"})(t=n.InstrumentationEventType||(n.InstrumentationEventType={}));i=function(){function i(n,t,i,r,u){this.timerRef=undefined;this.kValueRegex=/ID=(\w+),(\d+(?:\.\d+)*)/i;this.rootElement=n;this.appNs=t;this.answerModel=i;this.service=r;this.scenario=u}return i.prototype.logMessage=function(t){n.viewModel.IsDebugConsoleEnabled&&console&&console.log(t)},i.prototype.logError=function(n,i,r){this.logInstrumentation(null,t.Error,"JSError",!1,{Message:n,Error:i?"m: "+i.message+", stk: "+i.stack:"",Object:r?r.toString():""})},i.prototype.logInstrumentation=function(i,r,u,f,e){var s,l,a,h,c,o;if(e=e||{},s=n.viewModel.PartnerInfo&&n.viewModel.PartnerInfo.LoggingMode&&n.viewModel.PartnerInfo.LoggingMode>=0&&n.viewModel.PartnerInfo.LoggingMode<=2?n.viewModel.PartnerInfo.LoggingMode:0,s!==2)if(r==t.Init&&i&&e.IsClickable&&_w&&_w.DsLManager&&DsLManager.CreateInstrumentedItem&&s===0&&(l=e.Url&&e.Url.toString(),a=DsLManager.CreateInstrumentedItem(this.appNs,l,"",this.getDataSourceRoot()),i.setAttribute("h",a.GetNamespacedKValue()),this.updateLayoutAndDatasources()),h=i&&this.parseNamespacedKValue(i.getAttribute("h")),h&&(e.AppNS=h.AppNS,e.K=h.K),e.Channel=n.viewModel.Channel,e.PartnerId=n.viewModel.PartnerId,e.FID="ModernRewardsFlyout",e.EventName=u,s===0){if(_w&&_w.Log2&&Log2.LogEvent&&_G.XLS)Log2.LogEvent("ClientInst",e,r),Log2.ForceFlush&&f&&Log2.ForceFlush(!0);else if(_w&&_w.Log&&Log.Log){if(c=["Fallback","1"],e&&e.hasOwnProperty)for(o in e)e.hasOwnProperty(o)&&(c.push(o?o.toString():""),c.push(e[o]?e[o].toString():""));Log.Log.apply(Log,__spreadArrays([r,"ModernRewardsFlyout",u,f],c))}}else window.parent.postMessage({action:"Log",eventType:r,eventData:e},"*")},i.prototype.getDataSourceRoot=function(){return!this.dataSourcesRoot&&_w&&_w.DsLManager&&DsLManager.CreateDataSourcesRoot&&(this.dataSourcesRoot=DsLManager.CreateDataSourcesRoot(this.appNs,this.answerModel,this.scenario,this.service),this.rootElement.setAttribute("data-k",this.dataSourcesRoot.K.toString()),this.rootElement.setAttribute("data-region",this.scenario),this.rootElement.setAttribute("data-isregion","")),this.dataSourcesRoot},i.prototype.updateLayoutAndDatasources=function(){var n=this;this.timerRef&&(sb_ct&&sb_ct(this.timerRef),this.timerRef=undefined);this.timerRef=sb_st&&sb_st(function(){_w&&_w.DsLManager&&_w.Log2&&Log2.LogEvent&&_G.XLS&&DsLManager.LogUpdatedLayoutCentralizedDataSources&&DsLManager.LogUpdatedLayoutCentralizedDataSources(n.rootElement,n.appNs,null,null);n.timerRef=undefined},100)},i.prototype.parseNamespacedKValue=function(n){if(!n)return null;var t=this.kValueRegex.exec(n);return t&&t.length==3?{AppNS:t[1],K:t[2]}:null},i.Instance=new i(_ge("modern-flyout"),"RewardsFlyout","D.Top.RewardsFlyout","RewardsAnswer","RewardsFlyoutModule"),i}();n.Logger=i}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t="ImpressionPromotion",i=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype.componentDidMount=function(){var f=this,r=this.props.CustomProperties,u=r&&r[t],i;n.viewModel.FlyoutConfig.RedDotAnimation&&u&&(i=n.viewModel.FlyoutResult.ImpressionPromotions,i&&i.forEach(function(n){n.Name==u&&f.postActivity(n)}),this.hideRedDot())},r.prototype.postActivity=function(t){var i={};i.ActivityType=t.ActivityType;i.ActivitySubType="";i.Channel=n.viewModel.Channel;i.PartnerId=n.viewModel.PartnerId;i.UserId=n.viewModel.UserId;i.OfferId=t.OfferId;i.AuthKey=t.Hash;n.postReportActivity(i,function(){n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Success,"ReportActivityAjax",!1,{})},function(t,i,r){n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Error,"ReportActivityAjax",!1,{message:"Error occured while fetching user info. Reason: "+t+", statusCode: "+i+", responseText: "+r})})},r.prototype.hideRedDot=function(){window&&window.parent&&window.parent.postMessage({action:"redDotControl"},"*")},r}(React.PureComponent);n.LayoutBase=i}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){var i=t.call(this,n)||this;return i.state={hasError:!1},i}return __extends(i,t),i.prototype.render=function(){n.Logger.Instance.logMessage("ControlErrorBoundary render for section:"+this.props.sectionName+" & controlKey:"+this.props.controlKey);var t=this.state.hasError;return t?null:this.props.children},i.prototype.componentWillReceiveProps=function(){n.Logger.Instance.logMessage("ControlErrorBoundary componentWillReceiveProps for section:"+this.props.sectionName+" & controlKey:"+this.props.controlKey);this.setState({hasError:!1})},i.prototype.componentDidCatch=function(t,i){n.Logger.Instance.logMessage("ControlErrorBoundary componentDidCatch for section:"+this.props.sectionName+" & controlKey:"+this.props.controlKey);n.Logger.Instance.logError("ControlErrorBoundary: An unexpected error has occured for section:"+this.props.sectionName+" & controlKey:"+this.props.controlKey,t,i);var r=this.props,u=r.notifyChildHidden,f=r.controlKey,e=r.sectionName;u&&u(e,f);this.setState({hasError:!0})},i}(React.PureComponent);n.ControlErrorBoundary=t}(ModernFlyout||(ModernFlyout={})),function(n){function u(r,u,f,e,o){var s=""+n.formatString(i,r,u)+(f?"&"+f:""),h={url:s,requestType:"GET",onSuccess:e,onError:o};t(h)}function f(n,i,u){var f={url:r,requestType:"POST",body:n&&JSON.stringify(n),onSuccess:i,onError:u};t(f)}function t(n){var l,u,f;if(n!=null){var e=n.timeout,o=n.onSuccess,i=n.onError,s=n.accessToken,a=n.url,h=n.body,v=n.tries,y=n.requestType,r=n.headers,t=sj_gx(),p=y||"GET",c=function(){return t.open(p,a,!0)};if(c(),t.withCredentials=!0,t.ontimeout=function(){return i&&i("timeout",504,null)},t.timeout=e==null?0:e,l=v||1,u=function(n,t,r){i!=null&&i(t,n,r)},s!=null&&t.setRequestHeader("Authorization","Bearer "+s),r)for(f in r)t.setRequestHeader(f,r[f]);t.onreadystatechange=function(){var n,i;if(t.readyState===4)if(t.status===200){if(o!=null){if(n=null,t.responseText!=null&&t.responseText!=="")try{n=JSON.parse(t.responseText)}catch(r){u(-1,"InvalidData",t.responseText,"Bad data");return}o(n)}}else--l>0?(t.abort(),c(),t.send(h)):(i=t.status,u(t.status,"",t.responseText,"Ajax call failed with status "+t.status+". No retries available."))};t.send(h)}}var i="/rewardsapp/flyoutdata?channel={0}&partnerId={1}",r="/msrewards/api/v1/reportactivity";n.getUserInfoAjax=u;n.postReportActivity=f;n.sendAjax=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t,i;(function(n){n[n.chevronDown=0]="chevronDown";n[n.chevronLeft=1]="chevronLeft";n[n.chevronRight=2]="chevronRight";n[n.chevronUp=3]="chevronUp";n[n.phone=4]="phone";n[n.add=5]="add";n[n.correctCircle=6]="correctCircle";n[n.correctCircleDisabled=7]="correctCircleDisabled";n[n.earningDesktop=8]="earningDesktop";n[n.earningMobile=9]="earningMobile";n[n.earningEdge=10]="earningEdge";n[n.earningRebates=11]="earningRebates";n[n.earningPcSearchCombined=12]="earningPcSearchCombined"})(t=n.SvgIconType||(n.SvgIconType={}));i=function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return __extends(i,n),i.prototype.render=function(){var n=this.props.icon;return this.renderIcon(n)},i.prototype.renderIcon=function(n){switch(n){case t.chevronDown:return this.renderChevronDown();case t.chevronLeft:return this.renderChevronLeft();case t.chevronRight:return this.renderChevronRight();case t.chevronUp:return this.renderChevronUp();case t.phone:return this.renderPhone();case t.add:return this.renderAdd();case t.correctCircle:return this.renderCorrectCircle();case t.correctCircleDisabled:return this.renderCorrectCircle(!0);case t.earningDesktop:return this.renderEarningDesktop();case t.earningMobile:return this.renderEarningMobile();case t.earningEdge:return this.renderEarningEdge();case t.earningRebates:return this.renderEarningRebates();case t.earningPcSearchCombined:return this.renderEarningPcSearchCombined();default:return null}},i.prototype.renderChevronDown=function(){return React.createElement("svg",{className:"rw-si chevronDown",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M.293,5.707l7,7a1,1,0,0,0,1.414,0l7-7a1,1,0,1,0-1.414-1.414L8,10.586,1.707,4.293A1,1,0,1,0,.293,5.707Z",fill:"#767676"}))},i.prototype.renderCorrectCircle=function(n){return React.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n?"rw-si correctCircleDisabled":"rw-si correctCircle"},React.createElement("path",{d:"M8 1C6.61553 1 5.26216 1.41054 4.11101 2.17971C2.95987 2.94888 2.06266 4.04213 1.53285 5.32122C1.00303 6.6003 0.86441 8.00776 1.13451 9.36563C1.4046 10.7235 2.07129 11.9708 3.05026 12.9497C4.02922 13.9287 5.2765 14.5954 6.63437 14.8655C7.99224 15.1356 9.3997 14.997 10.6788 14.4672C11.9579 13.9373 13.0511 13.0401 13.8203 11.889C14.5895 10.7378 15 9.38447 15 8C15 6.14348 14.2625 4.36301 12.9497 3.05025C11.637 1.7375 9.85652 1 8 1ZM12.207 6.207L7.207 11.207C7.01948 11.3945 6.76517 11.4998 6.5 11.4998C6.23484 11.4998 5.98053 11.3945 5.793 11.207L3.793 9.207C3.61085 9.0184 3.51005 8.7658 3.51233 8.5036C3.51461 8.2414 3.61978 7.99059 3.80518 7.80518C3.99059 7.61977 4.24141 7.5146 4.5036 7.51233C4.7658 7.51005 5.0184 7.61084 5.207 7.793L6.5 9.086L10.793 4.793C10.8853 4.69749 10.9956 4.62131 11.1176 4.5689C11.2396 4.51649 11.3708 4.4889 11.5036 4.48775C11.6364 4.4866 11.7681 4.5119 11.891 4.56218C12.0139 4.61246 12.1255 4.68671 12.2194 4.7806C12.3133 4.8745 12.3875 4.98615 12.4378 5.10905C12.4881 5.23194 12.5134 5.36362 12.5123 5.4964C12.5111 5.62918 12.4835 5.7604 12.4311 5.8824C12.3787 6.00441 12.3025 6.11475 12.207 6.207Z",className:"circle"}))},i.prototype.renderAdd=function(){var n=this.props.className;return React.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"rw-si add"+(n?" "+n:""),fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M9.04346 7.48193H11.335V9.13867H9.04346V11.7285H7.29785V9.13867H5V7.48193H7.29785V5H9.04346V7.48193Z"}))},i.prototype.renderChevronLeft=function(){return React.createElement("svg",{className:"rw-si chevronLeft",width:"16",height:"16",viewBox:"0 0 16 16"},React.createElement("g",null,React.createElement("polygon",{points:"11 16 12 15 5 8 12 1 11 0 3 8"})))},i.prototype.renderChevronRight=function(){return React.createElement("svg",{className:"rw-si chevronRight",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M5.707 15.707l7-7a1 1 0 0 0 0-1.414l-7-7a1 1 0 1 0-1.414 1.414l6.293 6.293-6.293 6.293a1 1 0 1 0 1.414 1.414z",fill:"#767676"}))},i.prototype.renderChevronUp=function(){return React.createElement("svg",{className:"rw-si chevronUp",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M15.707,10.293l-7-7a1,1,0,0,0-1.414,0l-7,7a1,1,0,1,0,1.414,1.414L8,5.414l6.293,6.293a1,1,0,1,0,1.414-1.414Z",fill:"#767676"}))},i.prototype.renderPhone=function(){return React.createElement("svg",{className:"rw-si phone",width:"16",height:"16",viewBox:"0 0 16 16"},React.createElement("g",null,React.createElement("path",{d:"M12.6 9.5C12.8 9.5 13 9.5 13.2 9.6 13.4 9.7 13.6 9.8 13.8 10L15.5 11.7C15.7 11.9 15.8 12 15.9 12.3 15.9 12.5 16 12.7 16 12.9 16 13.1 15.9 13.4 15.9 13.6 15.8 13.8 15.7 14 15.5 14.1 15.2 14.4 14.9 14.7 14.7 14.9 14.4 15.2 14.2 15.4 13.9 15.5 13.7 15.7 13.4 15.8 13.1 15.9 12.7 16 12.4 16 11.9 16 11.3 16 10.6 15.9 9.9 15.7 9.2 15.5 8.5 15.2 7.8 14.9 7.2 14.5 6.5 14.1 5.8 13.6 5.2 13.1 4.6 12.5 4 11.9 3.4 11.4 2.9 10.7 2.4 10.1 1.9 9.4 1.5 8.8 1.1 8.1 0.8 7.4 0.5 6.7 0.3 6.1 0.1 5.4 0 4.7 0 4.1 0 3.6 0 3.3 0.1 2.9 0.2 2.6 0.3 2.3 0.5 2.1 0.6 1.8 0.8 1.6 1.1 1.3 1.3 1.1 1.6 0.8 1.9 0.5 2 0.3 2.2 0.2 2.4 0.1 2.6 0 2.9 0 3.1 0 3.3 0 3.5 0 3.7 0.1 4 0.2 4.1 0.3 4.3 0.5L6 2.2C6.2 2.4 6.3 2.6 6.4 2.8 6.5 3 6.5 3.2 6.5 3.4 6.5 3.7 6.5 3.9 6.4 4.1 6.3 4.2 6.2 4.4 6.1 4.5 6 4.7 5.9 4.8 5.7 4.9 5.6 5.1 5.5 5.2 5.4 5.3 5.2 5.4 5.1 5.5 5.1 5.6 5 5.8 5 5.9 5 6 5 6.2 5 6.4 5.2 6.5L9.5 10.8C9.6 11 9.8 11 10 11 10.1 11 10.2 11 10.4 10.9 10.5 10.9 10.6 10.8 10.7 10.6 10.8 10.5 10.9 10.4 11.1 10.3 11.2 10.1 11.3 10 11.5 9.9 11.6 9.8 11.8 9.7 11.9 9.6 12.1 9.5 12.3 9.5 12.6 9.5ZM11.9 15C12.3 15 12.6 15 12.8 14.9 13.1 14.8 13.3 14.7 13.5 14.6 13.7 14.5 13.9 14.3 14.1 14.1 14.3 13.9 14.5 13.7 14.8 13.4 14.9 13.3 15 13.1 15 12.9 15 12.8 15 12.7 14.9 12.6 14.8 12.5 14.7 12.3 14.6 12.2 14.5 12 14.3 11.9 14.2 11.7 14 11.6 13.9 11.5 13.8 11.3 13.6 11.2 13.5 11.1 13.4 11 13.2 10.8 13.1 10.8 13.1 10.7 12.9 10.5 12.8 10.5 12.6 10.5 12.4 10.5 12.3 10.5 12.2 10.6 12.1 10.7 12 10.8 11.8 10.9 11.7 11 11.6 11.1 11.5 11.3 11.4 11.4 11.2 11.5 11.1 11.6 10.9 11.8 10.8 11.9 10.6 11.9 10.4 12 10.2 12 10 12 9.7 12 9.5 12 9.3 11.9 9.1 11.8 8.9 11.7 8.8 11.5L4.5 7.2C4.3 7.1 4.2 6.9 4.1 6.7 4 6.5 4 6.3 4 6 4 5.8 4 5.6 4.1 5.4 4.1 5.2 4.2 5.1 4.4 4.9 4.5 4.8 4.6 4.6 4.7 4.5 4.9 4.4 5 4.3 5.1 4.2 5.2 4 5.3 3.9 5.4 3.8 5.5 3.7 5.5 3.6 5.5 3.4 5.5 3.2 5.5 3.1 5.3 2.9 5.2 2.9 5.2 2.8 5 2.6 4.9 2.5 4.8 2.4 4.7 2.2 4.5 2.1 4.4 2 4.3 1.8 4.1 1.7 4 1.5 3.8 1.4 3.7 1.3 3.5 1.2 3.4 1.1 3.3 1 3.2 1 3.1 1 2.9 1 2.7 1.1 2.6 1.2 2.3 1.5 2.1 1.7 1.9 1.9 1.7 2.1 1.5 2.3 1.4 2.5 1.3 2.7 1.2 2.9 1.1 3.2 1 3.4 1 3.7 1 4.1 1 4.7 1.1 5.3 1.3 5.9 1.5 6.5 1.7 7.1 2.1 7.8 2.4 8.4 2.8 9 3.3 9.6 3.7 10.2 4.2 10.8 4.8 11.3 5.3 11.8 5.9 12.3 6.5 12.8 7.1 13.2 7.7 13.6 8.3 13.9 8.9 14.3 9.5 14.5 10.1 14.7 10.8 14.9 11.3 15 11.9 15Z"})))},i.prototype.renderEarningDesktop=function(){return React.createElement("svg",{className:"rw-si earn pc",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"17",height:"17"},React.createElement("path",{d:"M1792 384v896H256V384h1536zm256 1280q0 27-10 50t-27 40-41 28-50 10H128q-27 0-50-10t-40-27-28-41-10-50q0-16 3-35t8-37 14-35 21-29l120-120h1717l57 57q28 28 57 58 12 13 21 30t16 35 10 38 4 38z"}))},i.prototype.renderEarningMobile=function(){return React.createElement("svg",{className:"rw-si earn",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"15",height:"15"},React.createElement("path",{d:"M1536 0q27 0 50 10t40 27 28 41 10 50v1792q0 27-10 50t-27 40-41 28-50 10H512q-27 0-50-10t-40-27-28-41-10-50V128q0-27 10-50t27-40 41-28 50-10h1024zm-384 1792v-128H896v128h256z"}))},i.prototype.renderEarningEdge=function(){return React.createElement("svg",{className:"rw-si earn",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"15",height:"15"},React.createElement("path",{d:"M1865 1519q12 0 21 10t10 22q0 10-10 27t-27 40-37 45-38 43-32 35-19 20q-49 46-114 89t-137 78-148 54-143 21q-76 0-144-24t-126-66-104-100-78-123-50-137-18-142q0-85 28-167t74-154q12 81 47 151t87 128 118 103 139 77 152 47 154 17q95 0 185-19t176-62q8-4 17-8t17-5zM543 1411q0 93 23 183t66 173 106 151 142 120q-126-17-239-63t-212-117-177-162-135-199-86-227-31-246q0-69 27-127t71-105 102-81 116-57q63-23 128-33t132-11q60 0 121 9t120 29 112 49 99 71q-30 0-59 6t-56 20v-2q-54 24-102 63t-90 88-74 108-56 119-35 122-13 119zM1020 0q145 0 284 33t262 98 224 165 169 231q42 80 65 166t24 178q0 76-20 145t-58 127-94 103-124 76q-46 20-95 31t-99 11q-36 0-82-2t-94-11-90-24-72-42q-10-8-19-21t-9-28q0-13 13-30t30-42 31-59 14-81q0-90-34-167t-90-140-130-109-153-76q-72-26-146-38t-151-12q-132 0-261 38T80 639q61-148 155-266t214-201T714 45t306-45z"}))},i.prototype.renderEarningRebates=function(){return React.createElement("svg",{className:"rw-si earn",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"15",height:"15"},React.createElement("path",{d:"M1024 0h896v896L896 1920 0 1024 1024 0zm448 624q36 0 68-14t56-38 38-56 14-68q0-36-14-68t-38-56-56-38-68-14q-36 0-68 14t-56 38-38 56-14 68q0 36 14 68t38 56 56 38 68 14z"}))},i.prototype.renderEarningPcSearchCombined=function(){return React.createElement("svg",{className:"rw-si earn",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:"15",height:"15"},React.createElement("path",{d:"M877 697l851 298v437l-960 552-384-215V64l384 134v1350l541-311-266-124-166-416z"}))},i}(React.PureComponent);n.SvgIcon=i}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(n){function t(t){var i=n.call(this,t)||this;return i.state={showImage:!0},i.ImageLoadError=i.ImageLoadError.bind(i),i}return __extends(t,n),t.prototype.render=function(){var n=this.props,t=n.data,i=n.className,u=n.children,r=this.state.showImage;return r&&React.createElement("img",{className:i,src:t.source,alt:t.alternateText,onError:this.ImageLoadError})||React.createElement("picture",null,"children")},t.prototype.ImageLoadError=function(){this.setState({showImage:!1})},t}(React.PureComponent);n.SafeImage=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){var i=t.call(this,n)||this;return i.isPlaying=!1,i}return __extends(i,t),i.prototype.isAnimation=function(){var n=this.props.data;return n.source.replace(/^.*\./,"")==="json"},i.prototype.isAnimationReady=function(){return!this.isAnimation()||this.ready},i.prototype.render=function(){var t=this,i=this.props.data;return React.createElement("picture",{className:"animation-container"},!this.isAnimation()&&React.createElement(n.SafeImage,{data:i},React.createElement("span",null)),this.isAnimation()&&React.createElement("div",{className:"rewardsBodymovin",ref:function(n){t.animationElement=n}}))},i.prototype.componentDidMount=function(){this.loadOrUpdateAnimations()},i.prototype.componentDidUpdate=function(){this.loadOrUpdateAnimations()},i.prototype.componentWillUnmount=function(){this.animation&&(this.animation.removeEventListener("DOMLoaded",this.onInitializeAnimationEvent),this.animation.removeEventListener("complete",this.onAnimationCompleteEvent),this.animation.destroy(),this.animation=null)},i.prototype.loadOrUpdateAnimations=function(){if(this.isAnimation&&this.animationElement&&window.bodymovin){var n=this.props,t=n.data,i=n.startFrame,r=n.endFrame;!this.renderedData||t&&this.renderedData.source!==t.source?(this.loadAnimation(),this.renderedData=t,this.pausedFrame=r):!this.pausedFrame&&i?this.initializeAnimation():this.pausedFrame&&i&&i!==this.previousStartFrame&&this.initializeAnimation()}},i.prototype.playAnimation=function(){if(this.animation){var i=this.props,n=i.startFrame,t=i.endFrame;this.isPlaying||(this.isPlaying=!0,n?t?n!==t?this.animation.playSegments([n,t],!0):this.isPlaying=!1:this.animation.goToAndPlay(n,!0):this.animation.goToAndPlay(0,!0))}},i.prototype.stopAnimation=function(){if(this.animation){var n=this.props.startFrame;this.animation&&this.isPlaying&&(n?(this.animation.goToAndStop(n,!0),this.previousStartFrame=n):this.animation.goToAndStop(0,!0),this.isPlaying=!1)}},i.prototype.loadAnimation=function(){var i=this,n=this.props,t=n.data,f=n.autoPlay,r=n.speed,e=n.preserveAspectRatio,o=this.animationElement,u;t&&t.source&&(u={container:o,renderer:"svg",name:t.alternateText,loop:!1,autoplay:f||!1,isPaused:!0,path:t.source,rendererSettings:{viewBoxOnly:!0,className:"rewards-svg-renderer",preserveAspectRatio:e||null}},this.animation&&this.animation.destroy(),this.animation=window.bodymovin.loadAnimation(u),r&&this.animation.setSpeed(r),this.onInitializeAnimationEvent=function(){return i.initializeAnimation()},this.animation.addEventListener("DOMLoaded",this.onInitializeAnimationEvent),this.onAnimationCompleteEvent=function(){return i.onAnimationComplete()},this.animation.addEventListener("complete",this.onAnimationCompleteEvent))},i.prototype.initializeAnimation=function(){var t=this.props.startFrame,n;t&&this.animation&&(this.animation.goToAndStop(t,!0),this.previousStartFrame=t);n=this.animationElement.querySelector(".rewards-svg-renderer");n&&(n.setAttribute("aria-hidden","true"),n.setAttribute("focusable","false"));this.ready=!0},i.prototype.onAnimationComplete=function(){this.isPlaying=!1},i}(React.PureComponent);n.Animation=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype.render=function(){var u=this.props,f=u.promotion,o=u.iconClassName,i=f.PointProgressMax||0,r=f.Complete,t=undefined,e;return r?t=n.SvgIconType.correctCircle:i>0&&(t=n.SvgIconType.add),e=t||!r&&i>0,e?React.createElement("div",{className:"point_cont"+(r?" complete":"")},t&&React.createElement(n.SvgIcon,{icon:t,className:o}),!r&&i>0&&i.toLocaleString()):null},i}(React.PureComponent);n.PointControl=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=2e3,i=1e4,r=5e3,u="Carousel_Button_Title",f=10,e=20,o="RewardsOffersCarousel_NextArrowNav",s="RewardsOffersCarousel_PrevArrowNav",h=function(h){function c(n){var t=h.call(this,n)||this;return t.switchSlides=t.switchSlides.bind(t),t.selectSlide=t.selectSlide.bind(t),t.initCarousel=t.initCarousel.bind(t),t.toggleArrows=t.toggleArrows.bind(t),t.initAutoPlay=t.initAutoPlay.bind(t),t.stopAutoPlay=t.stopAutoPlay.bind(t),t.startAutoPlay=t.startAutoPlay.bind(t),t.setTimeout=t.setTimeout.bind(t),t.clearTimeout=t.clearTimeout.bind(t),t.initCarouselAfterTimeout=t.initCarouselAfterTimeout.bind(t),t.slidesVisibilityMap=[],t.carouselLoadInstrumented=!1,t.state={scrollLeft:0,maxScrollLeft:0,currentSlide:0,maxSlides:0,slides:[0],showArrows:!1},t}return __extends(c,h),c.prototype.render=function(){var t=this,i=this.props,l=i.width,e=i.height,a=i.contentWidth,v=i.children,r=this.state,f=r.currentSlide,y=r.maxSlides,h=r.slides,c=r.showArrows,p=n.localizedStrings[u];return React.createElement("div",{className:"rw-carsl",style:{width:l,height:e},onMouseEnter:function(){return t.toggleArrows(!0)},onMouseLeave:function(){return t.toggleArrows(!1)}},React.createElement("div",{className:"carsl-cont",style:{height:"calc("+e+" - 16px)"},ref:function(n){return t.scrollElement=n}},React.Children.map(v,function(n,t){return React.createElement("div",{className:"scr-cntnt",style:{width:a,height:"calc("+e+" - 16px)"},key:"carslitem_"+t},n)})),c&&f>0&&React.createElement("button",{"aria-label":n.localizedStrings[s],className:"arrows",onClick:function(){return t.switchSlides(!0)}},React.createElement(n.SvgIcon,{icon:n.SvgIconType.chevronLeft})),c&&f<y&&React.createElement("button",{"aria-label":n.localizedStrings[o],className:"arrows right",onClick:function(){return t.switchSlides(!1)}},React.createElement(n.SvgIcon,{icon:n.SvgIconType.chevronRight})),React.createElement("div",{className:"carsl-seq-grp"},h&&h.length>1&&h.map(function(n,i){return React.createElement("button",{className:"carsl-seq"+(f==i?" active":" deactive"),key:"carslitem_"+i,"aria-label":p+i,"aria-pressed":f==i?"true":"false",onClick:function(){return t.selectSlide(i)}})})))},c.prototype.componentDidMount=function(){this.initCarousel(0);this.initAutoPlay()},c.prototype.componentWillUnmount=function(){this.stopAutoPlay()},c.prototype.componentDidUpdate=function(n){var t=React.Children.count(n.children)==React.Children.count(this.props.children),i=t&&React.Children.toArray(n.children),r=t&&React.Children.toArray(this.props.children),u=t&&i.every(function(n){return r.some(function(t){return n.key==t.key})});t&&u&&n.contentWidth==this.props.contentWidth&&n.width==this.props.width&&n.scrollAmount==this.props.scrollAmount||this.initCarousel(0);(n.autoPlay!=this.props.autoPlay||n.interval!=this.props.interval)&&this.initAutoPlay();this.instrument()},c.prototype.initAutoPlay=function(){var n=this.props.autoPlay;this.stopAutoPlay();n&&this.startAutoPlay()},c.prototype.stopAutoPlay=function(){this.intervalHandle&&(window.clearInterval(this.intervalHandle),this.intervalHandle=null)},c.prototype.startAutoPlay=function(){var f=this,e=this.props,o=e.autoPlay,u=e.interval;o&&!this.intervalHandle&&(u=u&&u>=t&&u<=i?u:r,this.intervalHandle=window.setInterval(function(){var t=f.state,r=t.currentSlide,u=t.maxSlides,i=(r+1)%(u+1);n.Logger.Instance.logMessage("Selected Slide: "+i);f.selectSlide(i)},u))},c.prototype.toggleArrows=function(n){var t=this.state.showArrows;n?this.stopAutoPlay():this.startAutoPlay();t!=n&&this.setState({showArrows:n})},c.prototype.switchSlides=function(n){var i=this.state,t=i.currentSlide,u=i.maxSlides,r;(t!=0||!n)&&(t!=u||n)&&(r=t+(n?-1:1),this.selectSlide(r))},c.prototype.selectSlide=function(n){var r=this;if(this.scrollElement){var t=this.state,o=t.currentSlide,u=t.maxSlides,f=t.scrollLeft,a=t.maxScrollLeft,s=t.slides,i=!n||n<0?0:n>u?u:n;if(i!=o){this.scrollAnimation!=null&&this.scrollAnimation.stop();var h=s[i],c=h-f,e=Math.PI/2,l=e/20;this.scrollAnimation=new sj_anim(function(n,t){var u=f+Math.sin(t)*c;r.scrollElement.scrollLeft=u;r.setState({scrollLeft:u,currentSlide:i})});this.scrollAnimation.init(this.scrollElement,0,e,l,function(){})}}},c.prototype.initCarousel=function(n){var i,f,e;if(n===void 0&&(n=0),this.slidesVisibilityMap=[],this.carouselLoadInstrumented=!1,this.scrollElement){var o=this.scrollElement,s=o.scrollWidth,h=o.clientWidth;if(s==0||h==0){this.initCarouselAfterTimeout(n);return}var c=this.props.scrollAmount,u=s-h,t=Math.ceil(u/c),r=[];for(i=0;i<t;i++)r[i]=i*c;r[t]=u;f=!n||n<0?0:n>t?t:n;e=r[f];this.scrollElement.scrollLeft=e;this.setState({scrollLeft:e,currentSlide:f,maxScrollLeft:u,maxSlides:t,slides:r})}},c.prototype.instrument=function(){var i=this.state,t=i.currentSlide,r=i.maxSlides;this.carouselLoadInstrumented||(this.carouselLoadInstrumented=!0,n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,"CarouselLoadedOrUpdated",!1,{MaxSlide:r}));this.slidesVisibilityMap[t]||(this.slidesVisibilityMap[t]=!0,n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Show,"CarouselSlideVisible",!1,{CurrentSlide:t}))},c.prototype.initCarouselAfterTimeout=function(n){n===void 0&&(n=0);this.setTimeout(n)},c.prototype.clearTimeout=function(){this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=null)},c.prototype.setTimeout=function(n){var t=this;this.attempt>=f||(this.attempt++,this.clearTimeout(),this.timeoutHandle=window.setTimeout(function(){t.scrollElement&&t.scrollElement.scrollWidth>0&&t.scrollElement.clientWidth>0?t.initCarousel(n):t.setTimeout(n)},this.attempt*e))},c}(React.PureComponent);n.Carousel=h}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){var i=t.call(this,n)||this;return i.handleMouseEnterEvent=i.handleMouseEnterEvent.bind(i),i}return __extends(i,t),i.prototype.render=function(){var r=this,i=this.props,t=i.promotion,u=i.isPromotional,f=i.rootRegion,e={source:t.AnimatedIconUrl,alternateText:t.Title},o=t.Complete||t.PointProgressMax>0;return React.createElement("div",{className:"promo_cont"},React.createElement(n.PromotionLink,{promotion:t,isPromotional:u,rootRegion:f},React.createElement("div",{className:"fp_row align-top promo_card",onMouseEnter:this.handleMouseEnterEvent},React.createElement("div",{className:"fc_fix60 img_c"},React.createElement(n.Animation,{data:e,ref:function(n){r.animationElement=n}})),React.createElement("div",{className:"fc_dyn"},React.createElement("div",{className:"fp_row"},React.createElement("div",{className:"fc_dyn"},React.createElement("p",{className:"b_subtitle promo-title",title:t.Title},t.Title)),o&&React.createElement("div",{className:"fc_auto pc b_subtitle"},React.createElement(n.PointControl,{promotion:t}))),React.createElement("div",{className:"fp_row b_footnote promo-desc",title:t.Description},t.Description)))))},i.prototype.handleMouseEnterEvent=function(){this.animationElement&&this.animationElement.playAnimation()},i}(React.PureComponent);n.PromotionCard=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){var i=t.call(this,n)||this;return i.handleMouseEnterEvent=i.handleMouseEnterEvent.bind(i),i}return __extends(i,t),i.prototype.render=function(){var u=this,i=this.props,t=i.promotion,f=i.isSingle,e=i.isLast,o=i.rootRegion,s={source:t.AnimatedIconUrl,alternateText:t.Title},r=t.Complete||t.PointProgressMax>0;return React.createElement("div",{className:"banner_cont"+(f?" single":"")+(r?" wpoints":"")+(e?" last":"")},React.createElement(n.PromotionLink,{promotion:t,isPromotional:!0,rootRegion:o},React.createElement("div",{onMouseEnter:this.handleMouseEnterEvent,className:"promo_card"+(r?" wpoints":"")},React.createElement("div",{className:"fp_row align-top"},React.createElement("div",{className:"fc_dyn"},React.createElement("p",{className:"b_subtitle promo-title",title:t.Title},t.Title),React.createElement("p",{className:"b_footnote promo-desc",title:t.Description},t.Description)),React.createElement("div",{className:"fc_auto fp_col align-center img_c pc b_subtitle"},r&&React.createElement(n.PointControl,{promotion:t,iconClassName:"special"}),React.createElement(n.Animation,{data:s,ref:function(n){u.animationElement=n}}))))))},i.prototype.handleMouseEnterEvent=function(){this.animationElement&&this.animationElement.playAnimation()},i}(React.PureComponent);n.BannerCard=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){var i=t.call(this,n)||this;return i.onEnterPress=function(n){n.key=="Enter"&&i.onTitleClick()},i.onTitleClick=i.onTitleClick.bind(i),i}return __extends(i,t),i.prototype.render=function(){var t=this.props,e=t.title,i=t.isOpen,o=t.addBeginSeparator,s=t.showBage,h=t.promotionName,c=t.badgeTitle,l=t.children,r=t.collapsedControl,u=n.viewModel.FlyoutResult.ImpressionPromotions,f=!1;return u&&u.forEach(function(n){n.Name==h&&n.ActivityProgress<=0&&(f=!0)}),React.createElement("div",{className:"rw-accd-i"},o&&React.createElement("div",{className:"separator"}),React.createElement("div",{className:"i-h rw-sh fp_row",onClick:this.onTitleClick,onKeyDown:this.onEnterPress,role:"button",tabIndex:0,"aria-expanded":i},React.createElement("div",{className:"fc_dyn b_traits"},React.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),s&&f&&React.createElement("div",{className:"b_badge_NewRed"},React.createElement("span",null,c))),!i&&r&&React.createElement("div",{className:"fc_auto ccontrol"},r),React.createElement("div",{className:"fc_fix20 fp_row align-center"},i&&React.createElement(n.SvgIcon,{icon:n.SvgIconType.chevronUp}),!i&&React.createElement(n.SvgIcon,{icon:n.SvgIconType.chevronDown}))),i&&React.createElement("div",{className:"i-b"},l))},i.prototype.onTitleClick=function(){this.props.onToggle(this.props.itemKey)},i}(React.PureComponent);n.AccordionItem=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){var i=t.call(this,n)||this,r=i.getKey(n);return i.state={openedItem:r},i.toggleItem=i.toggleItem.bind(i),i.renderChildren=i.renderChildren.bind(i),i}return __extends(i,t),i.prototype.render=function(){var n=this.props.className;return React.createElement("div",{className:"rw-accd "+n||""},this.renderChildren())},i.prototype.componentDidMount=function(){this.updateParent();this.logChildState();n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,"AccordionLoaded",!1,{ItemCount:React.Children.count(this.props.children)})},i.prototype.updateParent=function(){window&&window.parent&&window.parent.postMessage({action:"resize",bodyHeight:window.document.body.scrollHeight},"*")},i.prototype.componentDidUpdate=function(){this.updateParent();this.logChildState();n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,"AccordionUpdated",!1,{ItemCount:React.Children.count(this.props.children)})},i.prototype.componentWillReceiveProps=function(n){var i=this.state.openedItem,r=this.getKeyIndex(n,i),t;(r==-1||this.props.openedIndex!=n.openedIndex)&&(t=this.getKey(n),this.setState({openedItem:t}))},i.prototype.toggleItem=function(n){var i=this.state.openedItem,t;i==n?(t=this.getNextKey(n),t!=n&&this.setState({openedItem:t})):this.setState({openedItem:n})},i.prototype.renderChildren=function(){var n=this;return React.Children.map(this.props.children,function(t){var i=t.props.itemKey==n.state.openedItem,r=n.toggleItem;return React.cloneElement(t,{isOpen:i,onToggle:r})})},i.prototype.logChildState=function(){var t=this;return React.Children.map(this.props.children,function(i){var r=i.props.itemKey==t.state.openedItem;n.Logger.Instance.logInstrumentation(null,r?n.InstrumentationEventType.Show:n.InstrumentationEventType.Hide,"AccordionControlEvent",!1,{Item:i.props.itemKey})})},i.prototype.getKey=function(n){var r=n.openedIndex||0,t=n.children&&React.Children.toArray(n.children),u="",i;return t&&t.length>0&&(i=t.length>r?t[r]:t[0],React.isValidElement(i)&&(u=i.props.itemKey)),u},i.prototype.getNextKey=function(n){var t=this.props.children&&React.Children.toArray(this.props.children),r=t.length,i,u;return r>1?(i=this.getKeyIndex(this.props,n),i==-1)?t[0].props.itemKey:(u=(i+1)%r,t[u].props.itemKey):n},i.prototype.getKeyIndex=function(n,t){var i=n.children&&React.Children.toArray(n.children),r=-1;return i&&i.forEach(function(n,i){n.props.itemKey===t&&(r=i)}),r},i}(React.PureComponent);n.AccordionControl=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(i){var r=t.call(this,i)||this;return r.queryParametersToProcessForFormCode=["ru"],r.assignRef=function(t){if(r.element=t,t){var i=r.props,u=i.title,f=i.rootRegion,e=i.href;n.Logger.Instance.logInstrumentation(r.element,n.InstrumentationEventType.Init,"LinkInitialized",!1,{IsClickable:!0,Region:f,Title:u,Url:e})}},r.onLinkClick=r.onLinkClick.bind(r),r.onContext=r.onContext.bind(r),r.state={target:i.target,href:i.href},r}return __extends(i,t),i.prototype.render=function(){var n=this.props,i=n.title,r=n.children,u=n.className,t=this.state,f=t.href,e=t.target;return React.createElement("a",{ref:this.assignRef,href:f,title:i,target:e,onClick:this.onLinkClick,onContextMenu:this.onContext,className:u||""},r)},i.prototype.componentDidMount=function(){var i=this.props,n=i.href,t=i.target;t=this.getTarget(n,t);n=this.processParameters(n);this.setState({target:t,href:n});this.logLinkLoad("FlyoutLinkLoaded")},i.prototype.componentDidUpdate=function(){this.logLinkLoad("FlyoutLinkUpdated")},i.prototype.logLinkLoad=function(t){var i=this.props,r=i.title,u=i.rootRegion,f=i.href,e=this.state.target;n.Logger.Instance.logInstrumentation(this.element,n.InstrumentationEventType.Load,t,!1,{Region:u,Title:r,Url:f,Target:e})},i.prototype.componentWillReceiveProps=function(n){if(this.props.href!=n.href||this.props.target!=n.target){var t=n.href,i=n.target;i=this.getTarget(t,i);t=this.processParameters(t);this.setState({target:i,href:t})}},i.prototype.onLinkClick=function(t){var i=this.props,r=i.click,u=i.title,f=i.rootRegion,e=i.href,o=this.state.target;n.Logger.Instance.logInstrumentation(this.element,n.InstrumentationEventType.Click,"LinkClick",!0,{Region:f,Title:u,Url:e,Target:o});r&&!r(t)&&t.preventDefault()},i.prototype.onContext=function(t){var i=this.props,r=i.contextClick,u=i.title,f=i.rootRegion;n.Logger.Instance.logInstrumentation(this.element,n.InstrumentationEventType.Click,"LinkRightClick",!0,{Region:f,Title:u});r&&!r(t)&&t.preventDefault()},i.prototype.processParameters=function(t){var c=this,o=n.viewModel.PartnerInfo.FormCode,f=n.viewModel.AdditionalParameters,r,e,s,h;if((o||f)&&this.canUseURLSearchParams())try{r=[];e=t.indexOf("?");e>=0?(r.push(t.substr(0,e)),r.push(t.substr(e+1))):r.push(t);var l=r[0],u=r.length>=2?r[1]:"",i=new URLSearchParams(u);if(this.queryParametersToProcessForFormCode.forEach(function(n){var t=i.get(n);t&&i.set(n,c.processParameters(t))}),o&&(i["delete"]("FORM"),i["delete"]("form"),i["delete"]("Form"),i.set("FORM",o)),f)for(s in f)h=f[s],h.AddParameterToOfferUrl&&i.set(s,h.ParameterValue);return u=i.toString(),u=u.indexOf("?")===0?u.substring(1):u,l+"?"+u}catch(a){n.Logger.Instance.logError("Error while processing parameters in links.",a)}return t},i.prototype.canUseURLSearchParams=function(){return!!_w.URLSearchParams},i.prototype.getTarget=function(t,i){if(n.viewModel.PartnerInfo){if(n.viewModel.PartnerInfo.LinkHandlingMode===1)return"_top";if(n.viewModel.PartnerInfo.LinkHandlingMode===2)return"_blank"}if(i==="_blank")return i;if(i==="_self")return"_top";var r=n.getLocation(t);return window.location.hostname===r.host?"_top":"_blank"},i.defaultProps={title:"",target:""},i}(React.PureComponent);n.FlyoutLink=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){var i=t.call(this,n)||this;return i.ClickEvent=i.ClickEvent.bind(i),i.ContextClickEvent=i.ContextClickEvent.bind(i),i.isRewarded=!1,i}return __extends(i,t),i.prototype.render=function(){var t=this.props,i=t.promotion,r=t.children,u=t.rootRegion;return React.createElement(n.FlyoutLink,{href:i.DestinationUrl,target:i.Target,click:this.ClickEvent,contextClick:this.ContextClickEvent,rootRegion:u},r&&r||i.LinkText)},i.prototype.ClickEvent=function(n){if(this.isInProgress)return!1;if(this.isRewarded)return this.reportClick("PromotionClick",!0),!0;var i=this.props,r=i.isPromotional,t=i.promotion;return!t.IsRewardable||t.Complete?(this.reportClick("PromotionClick",!1),!0):(this.isInProgress=!0,this.target=n.currentTarget,this.reportActivity(t,r),!1)},i.prototype.ContextClickEvent=function(){if(this.isInProgress)return!1;if(this.isRewarded)return this.reportClick("PromotionRightClick",!1),!0;var n=this.props.promotion;return!n.IsRewardable||n.Complete?(this.reportClick("PromotionRightClick",!1),!0):!1},i.prototype.componentDidMount=function(){var i=this.props,r=i.rootRegion,t=i.promotion,u=i.isPromotional;n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,"PromotionLoad",!1,{Region:r,PromotionName:t.Name||"",OfferId:t.OfferId||"",ActivitytType:t.ActivityType||"",Type:t.PromotionType||"",IsComplete:t.Complete||!1,IsPromotional:u||!1})},i.prototype.componentDidUpdate=function(){this.isRewarded=!1;var i=this.props,r=i.rootRegion,t=i.promotion,u=i.isPromotional;n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,"PromotionUpdate",!1,{Region:r,PromotionName:t.Name||"",OfferId:t.OfferId||"",ActivitytType:t.ActivityType||"",Type:t.PromotionType||"",IsComplete:t.Complete||!1,IsPromotional:u||!1})},i.prototype.reportClick=function(t){var r=this.props,u=r.rootRegion,i=r.promotion,f=r.isPromotional;n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Click,t,!1,{Region:u,PromotionName:i.Name||"",OfferId:i.OfferId||"",ActivitytType:i.ActivityType||"",Type:i.PromotionType||"",IsComplete:i.Complete||!1,IsPromotional:f||!1})},i.prototype.reportActivity=function(t,i){var u=this,r={};r.ActivityType=t.ActivityType;r.ActivitySubType="";r.OfferId=t.OfferId;r.Channel=n.viewModel.Channel;r.PartnerId=n.viewModel.PartnerId;r.UserId=n.viewModel.UserId;r.AuthKey=t.Hash;r.ActivityCount=i?2:1;n.postReportActivity(r,function(){u.reportClick("PromotionClick",!0);n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Success,"ReportActivityAjax",!1,{});u.isRewarded=!0;u.isInProgress=!1;u.target&&u.target.click();u.target=null},function(t,i,r){n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Error,"ReportActivityAjax",!1,{message:"Error occured while fetching user info. Reason: "+t+", statusCode: "+i+", responseText: "+r});u.isInProgress=!1;u.target=null})},i}(React.PureComponent);n.PromotionLink=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){function t(n){return{promotions:n.flyoutResult.PromotionalItems,isVisible:n.isVisible}}var i=function(t){function i(i){var r=t.call(this,i)||this;return n.Logger.Instance.logMessage("BannerPromotion constructor"),r}return __extends(i,t),i.prototype.render=function(){var r;n.Logger.Instance.logMessage("BannerPromotion render");var t=this.props,i=t.promotions,f=t.isVisible,u=t.controlKey,e=this.checkIfHidden(this.props);return e?null:(r=i.length,r>1?React.createElement(n.Carousel,{width:"100%",height:"102px",contentWidth:"295px",scrollAmount:296,autoPlay:f},i.map(function(t,i){return React.createElement(n.BannerCard,{promotion:t,key:"bp_"+t.Name,isLast:i==r-1,rootRegion:u})})):React.createElement(n.BannerCard,{isSingle:!0,promotion:i[0],rootRegion:u}))},i.prototype.componentDidMount=function(){this.instrument("BannerPromotionLoaded")},i.prototype.componentDidUpdate=function(){this.instrument("BannerPromotionUpdated")},i.prototype.instrument=function(t){var i=this.props.promotions,r=i?i.length:0,u=i?i.map(function(n){return n.Name}):[];n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,t,!1,{PromotionsCount:r,PromotionNames:u.join(";")})},i.prototype.checkIfHidden=function(t){var r=t.promotions,u=t.notifyChildHidden,f=t.sectionName,e=t.controlKey,i=!r||r.length==0;return i&&u&&u(f,e),n.Logger.Instance.logMessage("BannerPromotion checking hidden: "+i),i},i}(React.PureComponent);n.BannerPromotion=ReactRedux.connect(t)(i)}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=120,r=5,u=2400,f=3,i=1e3,e="DailySet_Complete_Hint",o="DailySet_AllComplete_Hint",s=function(s){function h(n){var t=s.call(this,n)||this;return t.attempt=0,t.isPlayed=!1,t}return __extends(h,s),h.prototype.render=function(){var f=this,s=this.props,l=s.promotions,h=s.streakPromotion,a=s.streakBonusPromotions,i=this.initializeStreak(h),c=this.initializeStreakBonus(h,a),t=c[0],r=c[1],u=t.progress>=t.progressMax,v=u?n.localizedStrings[o]:n.localizedStrings[e];return React.createElement("div",{"aria-label":i.progress+","+i.title+","+t.title,className:"streak_cont"},React.createElement("div",{className:"check-cont"},l.map(function(t){return React.createElement(n.SvgIcon,{key:"dscol_"+t.Name,icon:t.Complete?n.SvgIconType.correctCircle:n.SvgIconType.correctCircleDisabled})})),React.createElement("div",{className:"complete-hint"},v),React.createElement("p",{dangerouslySetInnerHTML:{__html:t.title}}),React.createElement("div",{className:"fp_row sb-cont"},React.createElement("div",{className:u?"fc_25pct c":"fc_25pct"},i.image.source&&React.createElement(n.Animation,{data:i.image,startFrame:i.animationStartFrame,endFrame:i.animationEndFrame,ref:function(n){f.counterAnimation=n}})),React.createElement("div",{className:u?"fc_50pct complete":"fc_50pct"},t.image.source&&React.createElement(n.Animation,{data:t.image,startFrame:t.animationStartFrame,endFrame:t.animationEndFrame,speed:t.animationSpeed,ref:function(n){f.bonusAnimation=n}})),React.createElement("div",{className:u?"fc_25pct complete":"fc_25pct"},r.image.source&&React.createElement(n.Animation,{data:r.image,startFrame:r.animationStartFrame,endFrame:r.animationEndFrame,ref:function(n){f.bonusUnlockAnimation=n}}))))},h.prototype.componentDidMount=function(){this.initializeAnimation()},h.prototype.componentDidUpdate=function(n){n.streakPromotion.ActivityProgress!==this.props.streakPromotion.ActivityProgress&&(this.attempt=0,this.isPlayed=!1,this.initializeAnimation())},h.prototype.componentWillUnmount=function(){},h.prototype.initializeStreak=function(i){if(i){var r=n.getStreakCounter(i);return r.animationStartFrame=r.progress<=0?1:(r.progress-1)%100*t||1,r.animationEndFrame=r.progress<=0?1:((r.progress-1)%100+1)*t-1,r}return null},h.prototype.initializeStreakBonus=function(i,f){if(i&&f&&f.length>0){var o=n.getStreakBonusCounters(i,f),e=o[0],h=o[1],s=e.progressMax<=r?t:Math.floor(u/e.progressMax),c=s/t;return e.animationStartFrame=e.progress<=1?1:(e.progress-1)*s+1,e.animationEndFrame=e.progress<=0?1:e.progress*s,e.animationSpeed=c,h.animationStartFrame=e.progress<e.progressMax?1:null,h.animationEndFrame=e.progress<e.progressMax?1:null,o}return null},h.prototype.initializeAnimation=function(){this.isPlayed||this.setTimeout()},h.prototype.clearTimeout=function(){this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=null)},h.prototype.setTimeout=function(){var n=this;this.attempt>=f||(this.attempt++,this.clearTimeout(),this.timeoutHandle=window.setTimeout(function(){n.counterAnimation&&n.counterAnimation.isAnimationReady()&&n.bonusAnimation&&n.bonusAnimation.isAnimationReady()&&n.bonusUnlockAnimation&&n.bonusUnlockAnimation.isAnimationReady()?(n.counterAnimation.playAnimation(),n.bonusAnimation.playAnimation(),n.bonusUnlockAnimation.playAnimation(),n.isPlayed=!0):n.setTimeout()},this.attempt==1?i:i/2))},h}(React.PureComponent);n.Streaks=s}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){function u(n){return{dailySetPromotions:n.flyoutResult.DailySetPromotions,streakPromotion:n.flyoutResult.StreakPromotion,streakBonusPromotions:n.flyoutResult.StreakBonusPromotions}}var t=n.viewModel.TestHookDate,i="RewardsDailySet_Completed",r="RewardsDailySet_Incomplete",f=function(u){function f(t){var i=u.call(this,t)||this;return n.Logger.Instance.logMessage("DailySetImplementor constructor"),i}return __extends(f,u),f.prototype.render=function(){n.Logger.Instance.logMessage("DailySetImplementor render");var u=this.props,s=u.dailySetPromotions,h=u.streakPromotion,o=u.streakBonusPromotions,l=u.IsCollapsed,a=u.controlKey,f=t?s[t]:s[this.getDate()],v=this.checkIfHidden(this.props),e=f.map(function(n){return n});if(e=e.sort(function(n,t){return n.Complete?-1:t.Complete?1:0}),v)return null;var c=f&&f.every(function(n){return n.Complete}),y=h&&o&&o.length>0,p=c?n.localizedStrings[i]:n.localizedStrings[r];return l?React.createElement("div",{className:"mfo_c_ds_collapsed","aria-label":p},e.map(function(t){return React.createElement(n.SvgIcon,{key:"dscol_"+t.Name,icon:t.Complete?n.SvgIconType.correctCircle:n.SvgIconType.correctCircleDisabled})})):React.createElement("div",{className:"mfo_c_ds"},c&&y&&React.createElement(n.Streaks,{promotions:e,streakPromotion:h,streakBonusPromotions:o})||f&&f.map(function(t){return React.createElement(n.PromotionCard,{promotion:t,key:"ds_"+t.OfferId,rootRegion:a})}))},f.prototype.componentDidMount=function(){this.logDailySetInstrumentation("DailySetLoaded")},f.prototype.componentDidUpdate=function(){this.logDailySetInstrumentation("DailySetUpdated")},f.prototype.logDailySetInstrumentation=function(i){var u=this.props,f=u.dailySetPromotions,e=u.streakPromotion,s=u.IsCollapsed,r=t?f[t]:f[this.getDate()];if(r&&r.length>0){var o=r.filter(function(n){return n.Complete}).length,h=r.length-o,c=e?e.ActivityProgress:0;n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,i,!1,{CompletedCount:o,NotStartedCount:h,TotalPromotions:r.length,StreakDays:c,IsCollapsed:s})}},f.prototype.checkIfHidden=function(i){var u=i.dailySetPromotions,f=i.notifyChildHidden,o=i.sectionName,s=i.controlKey,e=t?u[t]:u[this.getDate()],r=!e||e.length==0;return r&&f&&f(o,s),n.Logger.Instance.logMessage("DailySetImplementor checking hidden: "+r),r},f.prototype.getDate=function(){var t=new Date,u=t.getMonth()+1,i=u.toString(),r,n;return u<10&&(i="0"+i),r=t.getDate(),n=r.toString(),r<10&&(n="0"+n),i+"/"+n+"/"+t.getFullYear()},f}(React.PureComponent);n.DailySet=ReactRedux.connect(u)(f)}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var i="WorkAccount_Info_Key",t="Unlink",r=function(r){function u(n){var t=r.call(this,n)||this;return t.BingAtWork=_w&&_w.parent&&_w.parent.BingAtWork,t.BfbTel=_w&&_w.parent&&_w.parent.bfbTel,t}return __extends(u,r),u.prototype.componentDidMount=function(){var n;(n=this.BfbTel)===null||n===void 0?void 0:n.logShown(47,"BawRewards",null,{eventId:"BawRewards_Flyout_Impression"})},u.prototype.render=function(){var f=this,r,u;if(this.BingAtWork){var o=((u=(r=this.BingAtWork.tenantSettingsClient)===null||r===void 0?void 0:r.cachedTenantConfig)===null||u===void 0?void 0:u.displayName)||"",e=this.props,s=e.IsCollapsed,h=e.CustomProperties,c=n.getString(h,t,t),l=n.formatString(n.localizedStrings[i],o),a=function(){_w.parent.postMessage({action:"refresh"},"*")},v=function(){f.BingAtWork.Rewards&&f.BingAtWork.Rewards.deleteRewardsIntegration("Flyout",a)};return!s&&React.createElement("div",{className:"mfo_c_wa"},React.createElement("div",{className:"mfo_c_wa_info mfo_c_wa_text",dangerouslySetInnerHTML:{__html:l}}),React.createElement("div",{className:"mfo_c_wa_disc mfo_c_wa_text"},React.createElement("a",{onClick:v},c)))}return null},u}(React.PureComponent);n.WorkAccount=r}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){function c(n){return{counters:n.flyoutResult.UserStatus.Counters}}var u="PcSearch_Title",f="MobileSearch_Title",e="EdgeBonus_Title",o="PcSearchCombined_Title",s="CounterProgress",t="Counter",i="Mode",h="big",r="edgeplusbing",l=function(c){function l(t){var i=c.call(this,t)||this;return n.Logger.Instance.logMessage("EarningStatus constructor"),i}return __extends(l,c),l.prototype.render=function(){n.Logger.Instance.logMessage("EarningStatus render");var u=this.props,f=u.counters,r=u.CustomProperties,e=r&&r[t],o=r&&r[i];return React.createElement("div",{className:"mfo_c_es",tabIndex:0},this.getCounterToShow(f,e,o))},l.prototype.componentDidMount=function(){this.logCounterInstrumentation("EarningStatusLoaded")},l.prototype.componentDidUpdate=function(){this.logCounterInstrumentation("EarningStatusUpdated")},l.prototype.logCounterInstrumentation=function(r){var u=this.props.CustomProperties,f=u&&u[t]&&u[t],e=u&&u[i]&&u[i];n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,r,!1,{CounterToShow:f,Mode:e,Progress:this.progress,ProgressMax:this.progressMax})},l.prototype.getCounterToShow=function(t,i,c){var y=undefined,a=undefined,l=undefined,v=undefined,p=n.localizedStrings[s],w,b;this.progress=0;this.progressMax=0;switch(i){case"PcSearch":y=n.SvgIconType.earningDesktop;a=n.localizedStrings[u];l=this.getValidPromotion(t.PCSearch&&t.PCSearch.filter(function(n){return n.OfferId.toLowerCase().indexOf(r)==-1})[0]);v=l&&""+n.formatString(p,l.PointProgress.toLocaleString(),l.PointProgressMax.toLocaleString());this.progress=l.PointProgress;this.progressMax=l.PointProgressMax;break;case"MobileSearch":y=n.SvgIconType.earningMobile;a=n.localizedStrings[f];l=this.getValidPromotion(t.MobileSearch&&t.MobileSearch[0]);v=l&&""+n.formatString(p,l.PointProgress.toLocaleString(),l.PointProgressMax.toLocaleString());this.progress=l.PointProgress;this.progressMax=l.PointProgressMax;break;case"EdgeBonus":y=n.SvgIconType.earningEdge;a=n.localizedStrings[e];l=this.getValidPromotion(t.PCSearch&&t.PCSearch.filter(function(n){return n.OfferId.toLowerCase().indexOf(r)!=-1})[0]);v=l&&""+n.formatString(p,l.PointProgress.toLocaleString(),l.PointProgressMax.toLocaleString());this.progress=l.PointProgress;this.progressMax=l.PointProgressMax;break;case"PcCombined":y=n.SvgIconType.earningPcSearchCombined;a=n.localizedStrings[o];w=0;b=0;t.PCSearch&&t.PCSearch.forEach(function(n){w+=n.PointProgress;b+=n.PointProgressMax});v=t.PCSearch&&""+n.formatString(p,w.toLocaleString(),b.toLocaleString());this.progress=w;this.progressMax=b}if(c&&v)return c.toLowerCase()===h&&n.viewModel.Language&&n.viewModel.Language.toLowerCase()==="en"?React.createElement("div",{key:i,"aria-label":a+v},y&&React.createElement(n.SvgIcon,{icon:y,"alt-text":a}),a,v):React.createElement("div",{key:i,"aria-label":a+v},y&&React.createElement(n.SvgIcon,{icon:y,"alt-text":a}),v);var k=this.props,d=k.notifyChildHidden,g=k.sectionName,nt=k.controlKey;return d&&d(g,nt),n.Logger.Instance.logMessage("EarningStatus checking hidden: true"),null},l.prototype.getValidPromotion=function(n){return n&&n.PointProgressMax>0?n:undefined},l}(React.PureComponent);n.EarningStatus=ReactRedux.connect(c)(l)}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t="Rewards_Header_Title",i="Rewards_Header_Title",r="TitleUrl",u=function(u){function f(n){var t=u.call(this,n)||this;return t.state={},t}return __extends(f,u),f.prototype.render=function(){var f=this.props,e=f.CustomProperties,s=f.controlKey,u=n.getString(e,i,t),o=n.getString(e,r),h=u&&o;return h&&React.createElement(n.FlyoutLink,{href:o,className:"mfo_c_rh_link",rootRegion:s,title:u},React.createElement("div",{className:"mfo_c_rh fp_row align-center"},React.createElement("div",{className:n.viewModel.PartnerId.toLowerCase()=="windowssearchbox"?"b_mText b_header rw-h fc_dyn h_font":"b_mText rw-h fc_dyn"},u),React.createElement("div",{className:"fc_fix20"},React.createElement(n.SvgIcon,{icon:n.SvgIconType.chevronRight}))))||null},f}(React.PureComponent);n.FlyoutHeader=u}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){function f(n){return{promotions:n.flyoutResult.MorePromotions}}var u=5,t="MaxOffers",i="Mfo_MoreActivities_CompleteTitle",r="Mfo_MoreActivities_CompleteDesc",e=function(f){function e(n){return f.call(this,n)||this}return __extends(e,f),e.prototype.render=function(){var u=this,t=this.getPromotions(),f=t.every(function(n){return n.Complete}),e=n.getString(this.props.CustomProperties,i,i),o=n.getString(this.props.CustomProperties,r,r);return React.createElement("div",{className:"mfo_c_ma"},f&&React.createElement("div",{className:"comp_cont"},React.createElement("div",{className:"img_cont"},React.createElement(n.SvgIcon,{icon:n.SvgIconType.correctCircle})),React.createElement("p",{className:"b_subtitle"},e),React.createElement("p",{className:"b_footnote"},o))||t.map(function(t){return React.createElement(n.PromotionCard,{promotion:t,key:"ma_"+t.OfferId,rootRegion:u.props.controlKey})}))},e.prototype.componentDidMount=function(){this.logMoreActivitiesInstrumentation("MoreActivitiesLoaded")},e.prototype.componentDidUpdate=function(){this.logMoreActivitiesInstrumentation("MoreActivitiesUpdated")},e.prototype.logMoreActivitiesInstrumentation=function(t){var i=this.getPromotions(),r=i?i.length:0,u=i?i.filter(function(n){return n.Complete}).length:0;n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,t,!1,{CompletedCount:u,NotStartedCount:r-u,TotalPromotions:r,IsCollapsed:this.props.IsCollapsed})},e.prototype.getPromotions=function(){var f=this.props,n=f.promotions,r=f.CustomProperties,i;return!n&&n.length==0?[]:(i=r&&r[t]&&parseInt(r[t]),(!i||isNaN(i))&&(i=u),n=n.sort(function(n,t){return n.Complete&&t.Complete||!n.Complete&&!t.Complete?0:n.Complete?1:-1}),n.length>i&&(n=n.slice(0,i)),n)},e}(React.PureComponent);n.MoreActivities=ReactRedux.connect(f)(e)}(ModernFlyout||(ModernFlyout={})),function(n){n.isSectionVisible=function(t,i){var r=i&&i[t];return r&&r.some(function(t){return t&&n.supportedControls[t.Name]})};n.getSectionControls=function(t,i,r,u,f){r===void 0&&(r=-1);var e=i&&i[t]&&i[t].filter(function(i,r){var f="rsc_"+r+i.Name;return n.supportedControls[i.Name]&&!1!==u[t][f]});return r>=0&&(e=e&&e.slice(0,r)),e&&e.map(function(i,r){var e="rsc_"+r+i.Name,o;return u[t][e]=!0,o=React.createElement(n.supportedControls[i.Name],{Name:i.Name,CustomProperties:i.CustomProperties,IsCollapsed:!1,key:e,controlKey:e,sectionName:t,notifyChildHidden:f}),React.createElement(n.ControlErrorBoundary,{key:"CEB__"+e,controlKey:e,sectionName:t,notifyChildHidden:f},o)})};n.getSectionControlsWithCollapsedControl=function(t,i,r,u,f){r===void 0&&(r=-1);var e=i&&i[t]&&i[t].filter(function(i,r){var f="rsc_"+r+i.Name;return n.supportedControls[i.Name]&&!1!==u[t][f]});return r>=0&&(e=e&&e.slice(0,r)),e&&e.map(function(i,r){var e="rsc_"+r+i.Name;u[t][e]=!0;var o=n.viewModel.FlyoutConfig.ControlConfig[i.Name]||{Name:i.Name,Enabled:!0},s=o.IsCollapsible&&React.createElement(n.supportedControls[i.Name],{Name:i.Name,CustomProperties:i.CustomProperties,IsCollapsed:!0,key:e,controlKey:e,sectionName:t,notifyChildHidden:f}),h=React.createElement(n.supportedControls[i.Name],{Name:i.Name,CustomProperties:i.CustomProperties,IsCollapsed:!1,key:e,controlKey:e,sectionName:t,notifyChildHidden:f}),c=React.createElement(n.ControlErrorBoundary,{key:"CEBC__"+e,controlKey:e,sectionName:t,notifyChildHidden:f},s),l=React.createElement(n.ControlErrorBoundary,{key:"CEB__"+e,controlKey:e,sectionName:t,notifyChildHidden:f},h);return{element:l,collapsedElement:c,config:o}})};n.getHeader=function(t,i){var r=n.getString(i,"section_"+t+"_header");return r?React.createElement("h3",{className:"b_traits l_s_ht"},r):!1}}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var i="Signout_NonMuid_Button",r="Signout_Join_Button_Aria_Label",u="Signout_NonMuid_Title",f="GiveMuid_Title",e="GiveMuid",o="GiveMuid_Msg",s="Signout_NonMuid_Msg",h="rewardsFlyoutTermsKey",c="Give_Muid_Button",t="Signout_Muid_Button",l=function(l){function a(n){var t=l.call(this,n)||this;return t.state={},t}return __extends(a,l),a.prototype.render=function(){var g=this,a=n.viewModel.PartnerId==e;t=a?c:t;var v=this.props,l=v.CustomProperties,nt=v.controlKey,y=a?f:l?l.Title:u,p=a?o:l?l.Description:s,w=l?l.StaticLinks:h,tt=n.viewModel.FlyoutResult.IsMuidTrialEnabled,it=n.viewModel.FlyoutResult.JoinUrl,b=n.viewModel.FlyoutResult.MuidTrialPoints,rt=n.viewModel.AutoOpenFlag,ut=n.viewModel.AdditionalParameters&&n.viewModel.AdditionalParameters.dchannel&&n.viewModel.AdditionalParameters.dchannel.ParameterValue.toLowerCase(),ft=y&&n.localizedStrings[y],et=p&&n.localizedStrings[p],k=tt&&b&&b>0?n.localizedStrings[t]:n.localizedStrings[i],ot=w&&n.localizedStrings[w],d=n.viewModel.IsDarkMode;return React.createElement("div",{className:"mfo_c_so "+ut+(a?d?" givemuiddarkmode":" givemuid":d?" darkMode":"")},React.createElement("button",{id:"signout_closebtn",className:"close_btn "+(rt?"":"b_hide"),onClick:function(){return g.closeWindow()}}),React.createElement("div",{className:"title_tx"},ft),React.createElement("div",{className:"msg_tx"},et),React.createElement("div",{className:"mfo_c_rh_link ref_link",dangerouslySetInnerHTML:{__html:ot}}),React.createElement(n.FlyoutLink,{href:it,"aria-label":r,className:"b_subtitle bt_join",rootRegion:nt,title:k},k))},a.prototype.closeWindow=function(){window&&window.parent&&window.parent.postMessage({action:"close"},"*")},a}(React.PureComponent);n.SignedOut=l}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t="Signedout_Rebates_Title",i="Signedout_Rebates_Msg",r="Signout_NonMuid_Button",u="Money",f="LogoAltText",e="LogoUrl",o="RebatesCashAltText",s="RebatesCashUrl",h="rewardsFlyoutTermsKey",c=function(c){function l(n){var t=c.call(this,n)||this;return t.state={},t}return __extends(l,c),l.prototype.render=function(){var l=this.props,c=l.CustomProperties,y=l.controlKey,a=JSON.parse(c&&c[u]),p=c&&c[e],w=c&&c[s],b={source:p,alternateText:n.localizedStrings[f]},k={source:w,alternateText:n.localizedStrings[o]},d=n.viewModel.FlyoutResult.RebatesJoinUrl,g=a&&""+n.formatString(n.localizedStrings[t],a.toLocaleString(undefined,{minimumFractionDigits:2})),nt=n.localizedStrings[i],v=n.localizedStrings[r];return React.createElement("div",{className:"mfo_c_so rebatestrail"},React.createElement(n.SafeImage,{className:"img_mslogo",data:b}),React.createElement(n.SafeImage,{className:"img_gc",data:k}),React.createElement("div",{className:"title_tx_rebates"},g),React.createElement("div",{className:"msg_tx"},nt),React.createElement("div",{className:"mfo_c_rh_link ref_link",dangerouslySetInnerHTML:{__html:n.localizedStrings[h]}}),React.createElement(n.FlyoutLink,{href:d,className:"b_subtitle bt_join",rootRegion:y,title:v},v))},l}(React.PureComponent);n.RebatesSignedOut=c}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var r="Signout_NonMuid_Button",u="Signout_Join_Button_Aria_Label",t="GWBMuid_Title",f="Signout_NonMuid_Msg",e="rewardsFlyoutTermsKey",o="Give_Muid_Button",i="Signout_Muid_Button",s=function(s){function h(n){var t=s.call(this,n)||this;return t.state={},t}return __extends(h,s),h.prototype.render=function(){i=o;var h=this.props,s=h.CustomProperties,w=h.controlKey,c=s?s.Title:t,l=s?s.Description:f,a=e,b=s&&s.Title==t,k=n.viewModel.FlyoutResult.IsMuidTrialEnabled,d=n.viewModel.FlyoutResult.JoinUrl,v=n.viewModel.FlyoutResult.MuidTrialPoints,g=n.viewModel.AdditionalParameters&&n.viewModel.AdditionalParameters.dchannel&&n.viewModel.AdditionalParameters.dchannel.ParameterValue.toLowerCase(),nt=c&&n.localizedStrings[c],tt=l&&n.localizedStrings[l],y=n.viewModel.IsDarkMode,it=y?" givemuidv1dark":" givemuidv1",rt=y?" givemuidv2dark":" givemuidv2",ut=b?it:rt,p=k&&v&&v>0?n.localizedStrings[i]:n.localizedStrings[r],ft=a&&n.localizedStrings[a];return React.createElement("div",{className:"mfo_c_so "+g+ut},React.createElement("div",{className:"title_tx"},nt),React.createElement("div",{className:"msg_tx"},tt),React.createElement("div",{className:"mfo_c_rh_link ref_link",dangerouslySetInnerHTML:{__html:ft}}),React.createElement(n.FlyoutLink,{href:d,"aria-label":u,className:"b_subtitle bt_join",rootRegion:w,title:p},p))},h}(React.PureComponent);n.GiveMuidSignOut=s}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t="AccordionIndex",i="ImpressionPromotion",r="NewOfferBadge_Title",u=function(u){function f(t){var i=u.call(this,t)||this,r;return i.isComponentReady=!1,i.isVisibilityUpdated=!0,i.sectionNames=["header","upperfixed","body","lowerfixed","footer","footer-2X","footer-3X","footer-4X"],n.Logger.Instance.logMessage("BingSignedInFull constructor"),r=i.initializeVisibilityMaps(t),i.state={sectionVisibilityMap:r.sectionVisibilityMap,controlVisibilityMap:r.controlVisibilityMap,hasError:!1},r=i.initializeVisibilityMaps(t),i.sectionVisibilityMap=r.sectionVisibilityMap,i.controlVisibilityMap=r.controlVisibilityMap,i.renderBodyControl=i.renderBodyControl.bind(i),i.updateSectionVisibility=i.updateSectionVisibility.bind(i),i.updateParent=i.updateParent.bind(i),i.initializeVisibilityMaps=i.initializeVisibilityMaps.bind(i),i.notifyChildHidden=i.notifyChildHidden.bind(i),i}return __extends(f,u),f.prototype.render=function(){var w=this;n.Logger.Instance.logMessage("BingSignedInFull render");var h=this.props,i=h.Controls,r=h.CustomProperties,c=this.state,u=c.sectionVisibilityMap,b=c.hasError;if(b)return null;var f=u.header,e=u.upperfixed,o=u.body,s=u.lowerfixed,l=u.footer,a=u["footer-2X"],v=u["footer-3X"],y=u["footer-4X"],p=f&&(e||o||s),k=(f||e||o||s)&&(l||a||v||y);return React.createElement("div",{className:"mfo_l_bsif "},f&&React.createElement("div",{className:"l_s l_s_h"},React.createElement("div",{className:"l_s_s"},n.getSectionControls("header",i,1,this.controlVisibilityMap,this.notifyChildHidden))),p&&React.createElement("div",{className:"separator"}),React.createElement("div",{className:"l_s l_s_b"},e&&React.createElement("div",{className:"l_s_s l_s_ub"},n.getHeader("upperfixed",r),n.getSectionControls("upperfixed",i,3,this.controlVisibilityMap,this.notifyChildHidden)),o&&React.createElement(n.AccordionControl,{className:"l_s_s l_s_mb",openedIndex:r[t]?Number(r[t]):0},n.getSectionControlsWithCollapsedControl("body",i,3,this.controlVisibilityMap,this.notifyChildHidden).map(function(n,t){return w.renderBodyControl(n.element,n.collapsedElement,n.config,t)})),s&&React.createElement("div",{className:"l_s_s l_s_lb"},n.getHeader("lowerfixed",r),n.getSectionControls("lowerfixed",i,3,this.controlVisibilityMap,this.notifyChildHidden))),p&&React.createElement("div",{className:"separator"}),React.createElement("div",{className:"l_s l_s_f"},l&&React.createElement("div",{className:"l_s_s f_1x"},n.getHeader("footer",r),n.getSectionControls("footer",i,1,this.controlVisibilityMap,this.notifyChildHidden))||a&&React.createElement("div",{className:"l_s_s f_2x"},n.getHeader("footer-2X",r),React.createElement("div",{className:"fp_row"},n.getSectionControls("footer-2X",i,2,this.controlVisibilityMap,this.notifyChildHidden).map(function(n,t){return React.createElement("div",{key:"f2xc_"+t,className:"fc_50pct "+(t==0?"align_left":"align_right")}," ",n)})))||v&&React.createElement("div",{className:"l_s_s f_3x"},n.getHeader("footer-3X",r),React.createElement("div",{className:"fp_row"},n.getSectionControls("footer-3X",i,3,this.controlVisibilityMap,this.notifyChildHidden).map(function(n,t){return React.createElement("div",{key:"f3xc_"+t,className:"fc_33pct "+(t==0?"align_left":t!=2?"align_center":"align_right")}," ",n)})))||y&&React.createElement("div",{className:"l_s_s f_4x fp_row"},n.getHeader("footer-4x",r),React.createElement("div",{className:"fp_row"},n.getSectionControls("footer-4X",i,4,this.controlVisibilityMap,this.notifyChildHidden).map(function(n,t){return React.createElement("div",{key:"f4xc_"+t,className:"fc_25pct align_center"}," ",n)})))))},f.prototype.componentDidMount=function(){u.prototype.componentDidMount.call(this);n.Logger.Instance.logMessage("BingSignedInFull componentDidMount");this.isComponentReady=!0;this.updateSectionVisibility();this.updateParent();this.logLoad("BingSignedInFullLoad")},f.prototype.updateSectionVisibility=function(){var r=this,t,i;this.isComponentReady&&!this.isVisibilityUpdated&&(n.Logger.Instance.logMessage("BingSignedInFull: starting to update section visibility"),t=this.sectionVisibilityMap,i=!0,this.sectionNames.forEach(function(u){var e=!1,f,o;if(t[u]){if(n.Logger.Instance.logMessage("BingSignedInFull: checking section visibility for "+u),f=r.controlVisibilityMap[u],e=!0,f){for(o in f)if(f.hasOwnProperty(o)&&f[o]){e=!1;break}}else e=!1;e?(t[u]=!1,n.Logger.Instance.logMessage("BingSignedInFull: section "+u+" will be hidden")):(i=!1,n.Logger.Instance.logMessage("BingSignedInFull: section "+u+" will be visible"))}else n.Logger.Instance.logMessage("BingSignedInFull: section "+u+" is already hidden")}),n.Logger.Instance.logMessage("BingSignedInFull: state update required. IsAllHidded: "+i),this.setState({sectionVisibilityMap:t,controlVisibilityMap:this.controlVisibilityMap,hasError:i}),this.isVisibilityUpdated=!0)},f.prototype.updateParent=function(){window&&window.parent&&window.parent.postMessage({action:"resize",bodyHeight:window.document.body.scrollHeight},"*")},f.prototype.componentWillReceiveProps=function(t){n.Logger.Instance.logMessage("BingSignedInFull componentWillReceiveProps");this.isComponentReady=!1;this.isVisibilityUpdated=!0;var i=this.initializeVisibilityMaps(t);this.setState({sectionVisibilityMap:i.sectionVisibilityMap,controlVisibilityMap:i.controlVisibilityMap,hasError:!1});i=this.initializeVisibilityMaps(t);this.controlVisibilityMap=i.controlVisibilityMap;this.sectionVisibilityMap=i.sectionVisibilityMap},f.prototype.componentDidUpdate=function(){n.Logger.Instance.logMessage("BingSignedInFull componentDidUpdate");this.isComponentReady=!0;this.updateSectionVisibility();this.updateParent();this.logLoad("BingSignedInFullUpdate")},f.prototype.logLoad=function(t){var i=this.state,r=i.sectionVisibilityMap,u=i.controlVisibilityMap,f=i.hasError;this.sectionNames.forEach(function(t){var i,f;if(n.Logger.Instance.logInstrumentation(null,r[t]?n.InstrumentationEventType.Show:n.InstrumentationEventType.Hide,"RegionVisibility",!1,{Region:t,IsVisible:r[t]}),i=u[t],i)for(f in i)i.hasOwnProperty(f)&&n.Logger.Instance.logInstrumentation(null,i[f]?n.InstrumentationEventType.Show:n.InstrumentationEventType.Hide,"ControlVisibility",!1,{Control:f,Region:t,IsVisible:i[f]})});n.Logger.Instance.logInstrumentation(null,n.InstrumentationEventType.Load,t,!1,{hasError:f})},f.prototype.componentDidCatch=function(t,i){n.Logger.Instance.logMessage("BingSignedInFull componentDidCatch");n.Logger.Instance.logError("BingSignedInFull: An unexpected error has occurred",t,i);this.setState({hasError:!0})},f.prototype.initializeVisibilityMaps=function(t){var i={},r={},u=t.Controls;return this.sectionNames.forEach(function(t){r[t]=n.isSectionVisible(t,u);i[t]={}}),{sectionVisibilityMap:r,controlVisibilityMap:i}},f.prototype.notifyChildHidden=function(t,i){n.Logger.Instance.logMessage("BingSignedInFull notifyChildHidden called for section: "+t+" & controlKey: "+i);this.controlVisibilityMap&&this.controlVisibilityMap[t]&&this.controlVisibilityMap[t][i]&&(n.Logger.Instance.logMessage("BingSignedInFull: visibility set to false for section: "+t+" & controlKey: "+i),this.controlVisibilityMap[t][i]=!1,this.isVisibilityUpdated=!1,this.updateSectionVisibility())},f.prototype.renderBodyControl=function(t,u,f,e){var h=f&&f.HeaderTextKey&&n.localizedStrings[f.HeaderTextKey],c=n.localizedStrings[r],o="acci_"+e+(f&&f.Name)||e.toString(),l=f&&f.IsCollapsible&&u,s=this.props.CustomProperties,a=s&&s[i],v=n.viewModel.FlyoutConfig.RedDotAnimation&&f.HeaderTextKey==="DailySet_Header_Text"?!0:!1;return React.createElement(n.AccordionItem,{title:h,key:o,itemKey:o,addBeginSeparator:e>0,promotionName:a,showBage:v,badgeTitle:c,collapsedControl:l},t)},f}(n.LayoutBase);n.BingSignedInFull=u}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){var i=t.call(this,n)||this;return i.controlVisibilityMap={body:{}},i}return __extends(i,t),i.prototype.render=function(){var t=this.props,i=t.Controls,r=t.CustomProperties;return React.createElement("div",{className:"mfo_l_bso"},React.createElement("div",{className:"l_s_b"},n.getHeader("body",r),n.getSectionControls("body",i,1,this.controlVisibilityMap,undefined)))},i}(React.PureComponent);n.BingSignedOut=t}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var i="RefreshButton",r="CloseFlyoutButton",u="TraceId",f="ErrorTitle",e="ErrorMessage",o="UnsupportCountryMessage",t="SadPandaAltText",s="LogoAltText",h="LogoUrl",c="UnsupportedPanda",l="SadPanda",a="RewardsDisabledForAADTitle",v="RewardsDisabledForAADMessage",y=function(y){function p(n){return y.call(this,n)||this}return __extends(p,y),p.prototype.render=function(){var y=this,p=this.props.IsRefreshable,ut=n.viewModel.FlyoutConfig.ControlConfig.ErrorLayout.Properties[h],ft=n.viewModel.FlyoutConfig.ControlConfig.ErrorLayout.Properties[c],et=n.viewModel.FlyoutConfig.ControlConfig.ErrorLayout.Properties[l],w={source:ut,alternateText:n.localizedStrings[s]},ot={source:ft,alternateText:n.localizedStrings[t]},g={source:et,alternateText:n.localizedStrings[t]},st=n.viewModel.PartnerId.toLowerCase()=="windowssearchbox",nt=n.viewModel.IsUnsupportedCountry,b=n.viewModel.IsRewardsDisabledForAAD,k=nt||b?n.localizedStrings[r]:n.localizedStrings[i],tt=n.localizedStrings[u],it=n.viewModel.FlyoutResult.TraceId,d=nt?n.localizedStrings[o]:b?n.localizedStrings[a]:n.localizedStrings[f],rt=b?n.localizedStrings[v]:n.localizedStrings[e];return st?React.createElement("div",{className:"mfo_c_el_wsb"},React.createElement(n.SafeImage,{className:"img_sp",data:g}),React.createElement("div",{className:"b_subtitle title_tx"},d),React.createElement("div",{className:"b_subtitle msg_tx"},rt),React.createElement("div",{className:"trace_id"},""+n.formatString(tt,it)),p&&React.createElement("button",{className:"b_subtitle bt_ref",onClick:function(){return y.closeWindow()}},k),React.createElement(n.SafeImage,{className:"img_mslogo",data:w})):nt?React.createElement("div",{className:"mfo_c_el uc"},React.createElement(n.SafeImage,{className:"img_sp",data:ot}),React.createElement("div",{className:"b_subtitle title_tx"},d),React.createElement("div",{className:"trace_id"},""+n.formatString(tt,it)),React.createElement(n.SafeImage,{className:"img_mslogo",data:w}),p&&React.createElement("button",{className:"b_subtitle bt_ref",onClick:function(){return y.closeWindow()}},k)):b?React.createElement("div",{className:"mfo_c_el"},React.createElement(n.SafeImage,{className:"img_sp",data:g}),React.createElement("div",{className:"b_subtitle title_tx"},d),React.createElement("div",{className:"b_subtitle msg_tx"},rt),React.createElement(n.SafeImage,{className:"img_mslogo_top",data:w}),p&&React.createElement("button",{className:"b_subtitle bt_ref",onClick:function(){return y.closeWindow()}},k)):React.createElement("div",{className:"mfo_c_el"},React.createElement(n.SafeImage,{className:"img_sp",data:g}),React.createElement("div",{className:"b_subtitle title_tx"},d),React.createElement("div",{className:"b_subtitle msg_tx"},rt),React.createElement("div",{className:"trace_id"},""+n.formatString(tt,it)),React.createElement(n.SafeImage,{className:"img_mslogo",data:w}),p&&React.createElement("button",{className:"b_subtitle bt_ref",onClick:function(){return y.refreshParent()}},k))},p.prototype.refreshParent=function(){window&&window.parent&&window.parent.postMessage({action:"refresh"},"*")},p.prototype.closeWindow=function(){window&&window.parent&&window.parent.postMessage({action:"close"},"*")},p}(React.PureComponent);n.ErrorLayout=y}(ModernFlyout||(ModernFlyout={})),function(n){n.supportedControls={FlyoutHeader:n.FlyoutHeader,EarningStatus:n.EarningStatus,BannerPromotion:n.BannerPromotion,DailySet:n.DailySet,MoreActivities:n.MoreActivities,SignedOut:n.SignedOut,RebatesSignedOut:n.RebatesSignedOut,GiveMuidSignOut:n.GiveMuidSignOut,WorkAccount:n.WorkAccount};n.supportedLayouts={BingSignedInFull:n.BingSignedInFull,BingSignedOut:n.BingSignedOut}}(ModernFlyout||(ModernFlyout={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},function(n){function t(n){return{layoutModel:n.flyoutResult.Layout,userStatus:n.flyoutResult.UserStatus}}var i={fetchData:n.fetchUserInfo,changeVisibility:n.changeVisibility},r=function(t){function i(i){var r=t.call(this,i)||this;return n.Logger.Instance.logMessage("LayoutSelectorImplementor constructor"),r.clearVisibilityHandler=r.clearVisibilityHandler.bind(r),r.setVisibilityHandler=r.setVisibilityHandler.bind(r),r.visibilityChange=r.visibilityChange.bind(r),r.clearMessageHandler=r.clearMessageHandler.bind(r),r.setMessageHandler=r.setMessageHandler.bind(r),r.receiveMessage=r.receiveMessage.bind(r),r.state={hasError:!1},r}return __extends(i,t),i.prototype.render=function(){n.Logger.Instance.logMessage("LayoutSelectorImplementor render");var t=this.props.layoutModel,r=this.state.hasError,i=n.viewModel.PartnerId.toLowerCase()=="windowssearchbox";return!this.isError(n.viewModel)&&t.LayoutName&&n.supportedLayouts[t.LayoutName]?React.createElement(n.supportedLayouts[t.LayoutName],__assign(__assign({},t),{key:t.LayoutName})):n.viewModel.IsUnsupportedCountry||n.viewModel.IsRewardsDisabledForAAD?React.createElement(n.ErrorLayout,{IsRefreshable:!0}):React.createElement(n.ErrorLayout,{IsRefreshable:i})},i.prototype.isError=function(n){return n.IsError||n.IsUnsupportedCountry||n.IsRewardsDisabledForAAD},i.prototype.componentDidMount=function(){n.Logger.Instance.logMessage("LayoutSelectorImplementor componentDidMount");this.setVisibilityHandler();this.setMessageHandler();this.updateParent()},i.prototype.componentDidUpdate=function(){this.updateParent();this.updatePoints()},i.prototype.updateParent=function(){window&&window.parent&&window.parent.postMessage({action:"resize",bodyHeight:window.document.body.scrollHeight},"*")},i.prototype.updatePoints=function(){if(window&&window.parent){var n=this.props.userStatus;window.parent.postMessage({action:"updatePoints",newBal:n.TotalBalance,oldBal:n.OldBalance,goal:n.GoalBalance,incr:1,balUpdated:n.BalanceUpdated},"*")}},i.prototype.componentWillUnmount=function(){n.Logger.Instance.logMessage("LayoutSelectorImplementor componentWillUnmount");this.clearVisibilityHandler();this.clearMessageHandler()},i.prototype.componentWillReceiveProps=function(){n.Logger.Instance.logMessage("LayoutSelectorImplementor componentWillReceiveProps");this.setState({hasError:!1})},i.prototype.componentDidCatch=function(t,i){n.Logger.Instance.logMessage("LayoutSelectorImplementor componentDidCatch");n.Logger.Instance.logError("LayoutSelectorImplementor: An unexpected error has occurred",t,i);this.setState({hasError:!0})},i.prototype.clearVisibilityHandler=function(){this.visibilityChangeAdded&&(document.removeEventListener("visibilitychange",this.visibilityChange),this.visibilityChangeAdded=!1)},i.prototype.setVisibilityHandler=function(){this.visibilityChangeAdded||(document.addEventListener("visibilitychange",this.visibilityChange,!0),this.visibilityChangeAdded=!0)},i.prototype.clearMessageHandler=function(){this.messageHandlerAdded&&(window.removeEventListener("message",this.receiveMessage),this.messageHandlerAdded=!1)},i.prototype.setMessageHandler=function(){this.messageHandlerAdded||(window.addEventListener("message",this.receiveMessage,!0),this.messageHandlerAdded=!0)},i.prototype.visibilityChange=function(){document.visibilityState==="visible"?(n.Logger.Instance.logMessage("Visibile: fetching data"),this.props.fetchData(!0)):(n.Logger.Instance.logMessage("Visibile: hidden"),this.props.changeVisibility(!1))},i.prototype.receiveMessage=function(t){if(t.source==window.parent&&t.data)switch(t.data.action){case"visibility":var i=t.data.isVisible;i?(n.Logger.Instance.logMessage("Visibile message: fetching data"),this.props.fetchData(i)):(n.Logger.Instance.logMessage("Visibile message: hidden"),this.props.changeVisibility(i))}},i}(React.PureComponent);n.LayoutSelector=ReactRedux.connect(t,i)(r)}(ModernFlyout||(ModernFlyout={})),function(n){ReactDOM.render(React.createElement(ReactRedux.Provider,{store:n.flyoutStore},React.createElement(n.LayoutSelector,null)),_ge("modern-flyout"))}(ModernFlyout||(ModernFlyout={}))